# Cook.ai 教師端前端 UI 設計規劃

> 更新日期：2025-01-05

---

## 1. 設計理念轉變

### 1.1 從「對話導向」到「課程結構導向」

| 面向 | 舊設計（對話導向） | 新設計（課程結構導向） |
|------|-------------------|----------------------|
| **核心互動** | Sidebar 切換功能 + 聊天對話 | 課程內容瀏覽 + 情境式功能按鈕 |
| **資訊架構** | 功能分散在不同頁面 | 功能嵌入課程結構中 |
| **使用者體驗** | 需切換多個介面 | 在課程脈絡中完成所有操作 |
| **與學生端關係** | 教師/學生介面差異大 | 教師看到與學生相同結構，額外顯示管理功能 |

### 1.2 設計原則

1. **情境式操作**：功能按鈕出現在需要的地方（如「新增教材」出現在教材列表旁）
2. **漸進式揭露**：複雜功能（如 Critic 設定）預設隱藏，需要時展開
3. **一致性**：教師/學生看到相同課程結構，降低認知負擔
4. **即時回饋**：生成過程顯示進度，完成後立即預覽

---

## 2. 頁面架構

```
教師端系統
├── 首頁 (Home)
│   └── 選擇身份 → 教師平台
│
├── 課程列表頁 (TeacherCourseLayout)
│   └── 顯示教師負責的所有課程
│
├── 課程詳情頁 (CourseDetail) ⭐ 核心重構
│   ├── 課程公告區
│   ├── 課程內容區（週次/Topic 結構）
│   │   ├── Topic 1: 課程簡介
│   │   │   ├── 教材列表 + [新增教材] [AI生成]
│   │   │   └── 練習題列表 + [新增練習] [AI生成]
│   │   ├── Topic 2: 機器學習
│   │   │   └── ...
│   │   └── ...
│   └── 側邊工具列（可選，放置全域功能）
│
├── 教材生成頁 (MaterialGenerator) ⭐ 新設計
│   ├── Step 1: 設定頁（上傳/選擇教材 + 參數 + Prompt）
│   └── Step 2: 結果頁（預覽 + Critic 評估 + 編輯）
│
└── 歷史記錄頁 (History)
    └── 過往生成記錄與統計
```

---

## 3. 課程詳情頁設計（Course-Structured）

### 3.1 整體佈局

```
┌──────────────────────────────────────────────────────────────────────┐
│ 🍳 Cook.ai    教師頁面 / 智慧型網路服務工程            陳淳端  Logout  │
├────────┬─────────────────────────────────────────────────────────────┤
│        │                                                             │
│  學生  │  📢 最新公告                                                │
│  功能  │  ┌─────────────────────────────────────────────────────┐    │
│  (隱藏) │  │ Syllabus.pdf 更新公告  2025-12-08                   │    │
│        │  └─────────────────────────────────────────────────────┘    │
│ ─────  │                                                             │
│        │  📚 課程內容                                                │
│  教師  │  ─────────────────────────────────────────────────────────  │
│  專屬  │                                                             │
│  功能  │  ▼ Topic 1: 課程簡介                                   [>] │
│        │                                                             │
│ 📊學生 │  ▼ Topic 2: 機器學習-監督式學習演算法                   [>] │
│ 儀表板 │    ┌─────────────────────────────────────────────────────┐  │
│        │    │ 📄 1. 人工智慧的起源                                │  │
│ 📈學習 │    │    ⚠️ 尚未新增教材!  [教材生成] [教材編修]          │  │
│ 分析   │    ├─────────────────────────────────────────────────────┤  │
│        │    │ 📝 【練習】人工智慧的起源 問答                       │  │
│        │    ├─────────────────────────────────────────────────────┤  │
│        │    │ 📄 2. 監督式學習的定義                       [展開] │  │
│        │    └─────────────────────────────────────────────────────┘  │
│        │                                                             │
│        │  ▶ Topic 3: 非監督式學習                               [>] │
│        │                                                             │
└────────┴─────────────────────────────────────────────────────────────┘
```

### 3.2 功能按鈕設計

| 按鈕 | 位置 | 功能 | 觸發動作 |
|------|------|------|----------|
| **[教材生成]** | 教材項目旁 | AI 生成教材 | 進入教材生成頁 |
| **[教材編修]** | 教材項目旁 | 編輯現有教材 | 開啟編輯 Modal |
| **[新增教材]** | Topic 區塊底部 | 手動新增 | 開啟上傳 Modal |
| **[AI 出題]** | 練習區塊旁 | AI 生成練習題 | 進入題目生成頁 |

### 3.3 與原 TeacherSidebar 功能對應

| 原 Sidebar 功能 | 新位置 |
|----------------|--------|
| Cook AI 助教 | 移除獨立入口，整合至各 Topic 的「教材生成」按鈕 |
| 教材資料庫 | 保留在左側或頂部，作為全域教材管理入口 |
| 教材管理 | 整合至課程內容區的教材列表 |
| 公告管理 | 保留在課程詳情頁頂部「最新公告」區 |
| 學生儀表版 | 保留在左側作為教師專屬功能 |
| Literature Review | 可保留或移至工具選單 |
| AI Detector | 可保留或移至工具選單 |
| 探碳計算指標 | 可保留或移至工具選單 |

---

## 4. 教材生成頁設計（兩步驟流程）

### 4.1 Step 1: 設定頁

參考 Gamma AI 設計，三欄式佈局：

```
┌─────────────────┬─────────────────────┬──────────────────┐
│   Settings      │      Content        │   Instructions   │
│   (參數設定)     │    (教材預覽)        │   (Prompt輸入)   │
├─────────────────┼─────────────────────┼──────────────────┤
│                 │                     │                  │
│ 生成類型：       │ 📄 Chris_ML_W3.pdf  │ 額外指令：        │
│ ● 選擇題         │                     │ ┌──────────────┐ │
│ ○ 是非題         │ 目錄：              │ │ 偏好生成「資  │ │
│ ○ 簡答題         │ 1. 課程簡介         │ │ 料清理」相關  │ │
│ ○ 摘要          │ 2. PCA 降維         │ │ 題目          │ │
│                 │ 3. 特徵工程         │ └──────────────┘ │
│ 數量：[5] ▼     │                     │                  │
│                 │ [+ 新增教材]        │ 範例提示：        │
│ 詳細程度：       │                     │ • 幫我出 5 題... │
│ [████░░] 中等   │                     │ • 針對第 2 章... │
│                 │                     │                  │
│ ☑ 啟用品質檢查   │                     │                  │
│ 評估模式：快速 ▼ │                     │                  │
│                 │                     │                  │
└─────────────────┴─────────────────────┴──────────────────┘
                        [✨ 開始生成]
```

### 4.2 Step 2: 結果頁

左右分欄，生成內容與評估結果並列：

```
┌────────────────────────────────────┬─────────────────────────────┐
│                                    │                             │
│  📝 生成選擇題 (5 題)              │  📊 品質評估         [收合]  │
│  基於：Chris_ML_W3.pdf             │  ───────────────────────────│
│  ──────────────────────────────────│  整體狀態：✅ 通過          │
│                                    │                             │
│  ┌────────────────────────────┐    │  事實正確性  4.2/5  ✅      │
│  │ 1. PCA 的主要功能是什麼？   │    │  可理解性    3.8/5  ⚠️      │
│  │                            │    │  語法正確    4.5/5  ✅      │
│  │    A. 增加數據維度          │    │  邏輯一致    4.0/5  ✅      │
│  │    B. 數據標準化            │    │  ───────────────────────────│
│  │    C. 降維 ✓                │    │  📝 改進建議                │
│  │    D. 數據清洗              │    │  • 第 2 題術語「遞迴」可    │
│  │                            │    │    補充說明                 │
│  │  📖 來源：P25              │    │  ───────────────────────────│
│  │  ⚠️ Critic：此題通過        │    │  ⏱ 12.3s  💰 $0.0045       │
│  └────────────────────────────┘    │                             │
│                                    ├─────────────────────────────┤
│  ┌────────────────────────────┐    │  🔧 修改選項                │
│  │ 2. 以下哪個不是監督式學習？ │    │  ───────────────────────────│
│  │    ...                     │    │  [📝 編輯模式]              │
│  │  ⚠️ Critic：術語需補充     │    │                             │
│  └────────────────────────────┘    │  🤖 AI 協助修改：           │
│                                    │  ┌───────────────────────┐  │
│  ...                               │  │ 請修改第 2 題...      │  │
│                                    │  │                [送出] │  │
│                                    │  └───────────────────────┘  │
│                                    │  ───────────────────────────│
│                                    │  [🔄 重新生成] [💾 儲存]     │
│                                    │  [📤 匯出]                  │
└────────────────────────────────────┴─────────────────────────────┘
```

### 4.3 Critic 評估顯示策略

| 顯示位置 | 資訊類型 | 用途 |
|----------|----------|------|
| **右側評估面板** | 整體分數、各指標分數、成本 | 快速概覽品質狀態 |
| **題目卡片內嵌** | 該題的 Critic 建議 | 快速定位問題題目 |
| **可收合** | 預設展開，可收合 | 不干擾閱讀 |

---

## 5. 元件重構規劃

### 5.1 需修改的元件

| 元件 | 修改內容 |
|------|----------|
| `TeacherCourseLayout.tsx` | 調整為課程列表入口 |
| `TeacherSidebar.tsx` | 精簡功能，移除整合至課程頁的項目 |
| `TeacherAICenter.tsx` | 棄用，功能移至 `MaterialGenerator` |
| `ChatInterface.tsx` | 重構為 AI 協助修改的輸入元件 |

### 5.2 需新增的元件

| 元件 | 功能 |
|------|------|
| `CourseDetail.tsx` | 課程詳情頁主元件 |
| `TopicSection.tsx` | 可展開的 Topic 區塊 |
| `MaterialItem.tsx` | 教材項目（含操作按鈕） |
| `MaterialGenerator/` | 教材生成流程（設定頁 + 結果頁） |
| `GeneratorSettings.tsx` | 生成設定面板 |
| `GeneratorResults.tsx` | 生成結果預覽 |
| `CriticPanel.tsx` | Critic 評估結果面板 |
| `EditPanel.tsx` | 修改選項面板 |

---

## 6. 後端 API 調整需求

| 需求 | 現有 API | 建議調整 |
|------|----------|----------|
| **多教材 RAG** | `unique_content_id: int` | 改為 `unique_content_ids: List[int]` |
| **AI 協助修改** | 無 | 新增 `POST /api/v1/refine` |
| **課程內容結構** | `GET /courses/{id}` | 擴充返回完整教材與練習題結構 |
| **單題重新生成** | 無 | 可選：新增 `POST /api/v1/regenerate-question` |

---

## 7. 開發優先順序

| 優先順序 | 任務 | 預估工時 |
|----------|------|----------|
| 🔴 **P0** | 課程詳情頁 (Course-Structured) 重構 | 3-4 天 |
| 🔴 **P0** | 教材生成頁 Step 1 (設定頁) | 2-3 天 |
| 🔴 **P0** | 教材生成頁 Step 2 (結果頁 + Critic 顯示) | 3-4 天 |
| 🟡 **P1** | AI 協助修改功能 (前端+後端) | 2-3 天 |
| 🟡 **P1** | 多教材 RAG 支援 (後端調整) | 1-2 天 |
| 🟢 **P2** | 歷史記錄頁 | 2 天 |
| 🟢 **P2** | 匯出功能 (Word/PDF) | 1-2 天 |

---

## 8. 附錄：UI 構思參考圖

### 8.1 生成設定頁（參考 Gamma AI）

![生成設定頁構思](/home/monica/.gemini/antigravity/brain/8edd7743-7dab-4fe6-abdd-eb72a3d0921e/uploaded_image_0_1767590058300.png)

### 8.2 生成結果頁

![生成結果頁構思](/home/monica/.gemini/antigravity/brain/8edd7743-7dab-4fe6-abdd-eb72a3d0921e/uploaded_image_1_1767590058300.png)

### 8.3 課程結構導向介面

![課程結構導向構思](/home/monica/.gemini/antigravity/brain/8edd7743-7dab-4fe6-abdd-eb72a3d0921e/uploaded_image_1767590513695.png)
