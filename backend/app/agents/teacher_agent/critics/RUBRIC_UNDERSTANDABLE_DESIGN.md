# 可理解性 (Understandable) - Rubric 設計與範例（Evidence-Based 版本）

## 🎯 評估目標（更新版）

**核心前提**：學生已看過完整教材

**評估重點**：
1. **優先檢查**：正確答案是否與 `source.evidence` 矛盾（最嚴重）
2. **主要檢查**：題目中的專業術語是否在 `source.evidence` 中出現
3. **放寬要求**：不強求題目提供完整情境故事（因學生已看過教材）

---

## 📋 優化後的 Rubric

### 1 分 - 嚴重問題（兩種情況）

**情況 A：答案與 Evidence 矛盾**
- 正確答案與 `source.evidence` 內容**相反或矛盾**
- 這是邏輯錯誤，會讓學生完全混淆

**範例：**
```json
{
  "question_text": "填補缺失值的方式之一是使用什麼來填補年齡？",
  "correct_answer": "A",
  "options": {"A": "中位數", "B": "平均數", ...},
  "source": {
    "evidence": "年齡 (Age) 列填補為平均值。"
  }
}
```

**問題點：**
- ❌ 正確答案是「中位數」
- ❌ Evidence 明確說「平均值」
- ❌ 邏輯矛盾，學生會完全混淆

---

**情況 B：大量未定義術語**
- 使用**4個以上**教材中完全未出現的專業術語
- 學生即使看過教材也無從理解

**範例：**
```
問題：「在深度學習中，使用 Adam optimizer 調整 learning rate 的優勢為何？」
evidence: "機器學習有多種方法。"
```

**問題點：**
- ❌ 深度學習（未在 evidence）
- ❌ Adam optimizer（未在 evidence）
- ❌ learning rate（未在 evidence）
- ❌ 共 3+ 個未出現術語

---

### 2 分 - 需要大幅改進

**特徵：**
- 使用 **3 個以上**教材中未出現的專業術語
- 或題目用途與 evidence 描述不符

**範例：**
```
問題：「使用 KNN 算法進行特徵選擇的目的為何？」
evidence: "使用 KNN 算法預測缺失值。"
```

**問題點：**
- ⚠️ Evidence 說 KNN 用於「預測缺失值」
- ⚠️ 題目問 KNN 的「特徵選擇」用途
- ⚠️ 用途不符，學生會混淆

---

### 3 分 - 基本可接受

**特徵：**
- 大部分術語在 `source.evidence` 中有出現
- 有 **1-2 個術語**未在 evidence 中提及
- 假設學生已看過完整教材，應可推測理解

**範例：**
```
問題：「填補缺失值可以使用中位數或平均數，何者較不受極端值影響？」
evidence: "填補缺失值可使用平均數。"
```

**分析：**
- ✅ 「填補缺失值」、「平均數」在 evidence 中
- ⚠️ 「中位數」、「極端值」未在 evidence 中
- 💡 學生可能從教材其他部分知道中位數概念

---

### 4 分 - 清楚易懂（優秀標準）

**特徵：**
- **所有關鍵術語**都在 `source.evidence` 中明確出現
- 題目與 evidence 內容一致
- 學生看過教材後能直接理解

**範例：**
```
問題：「使用 KNN 算法的目的為何？」
options: {"A": "...", "B": "預測缺失值", ...}
evidence: "使用如 KNN（K-Nearest Neighbors）等算法，根據相似記錄來預測缺失值。"
```

**優點：**
- ✅ KNN 在 evidence 中有定義
- ✅ 「預測缺失值」在 evidence 中明確提到
- ✅ 題目與 evidence 完全一致

---

### 5 分 - 極度清晰（理想標準，罕見）

**特徵：**
- 所有術語在 evidence 中有出現
- **額外提供**背景說明或具體範例
- 即使學生記憶模糊，也能透過題目重新喚起記憶

**範例：**
```
問題：「在處理缺失值時，我們可以使用 KNN（K-Nearest Neighbors）算法。
KNN 會尋找與缺失值記錄最相似的 K 筆記錄，並根據這些記錄來預測缺失值。
這種方法的主要優勢為何？」
evidence: "使用 KNN 算法預測缺失值。"
```

**優點：**
- ✅ 術語在 evidence 中
- ✅ 題目**額外解釋** KNN 的運作原理
- ✅ 學生即使只記得大概，也能透過題目回憶

---

## 🔍 評估檢查清單（更新版）

### 優先級 1：矛盾檢查（必須優先）
- [ ] 正確答案是否與 `source.evidence` **內容相反**？
- [ ] 題目描述的用途是否與 evidence **用途不符**？
- [ ] 若有矛盾 → **直接給 1 分**，無需繼續

### 優先級 2：術語檢查
- [ ] 提取所有專業術語（question_text + options）
- [ ] 計數有多少術語**未在 evidence 中出現**
- [ ] 4+ 個 → 1 分 | 3 個 → 2 分 | 1-2 個 → 3 分 | 0 個 → 4-5 分

### 不檢查的項目（已放寬）
- ✗ 不要求題目提供完整情境故事
- ✗ 不要求逐步解釋每個術語
- ✗ 不檢查是否有「引導性說明」

---

## 💡 LLM 評估建議模板（更新版）

```
【分析】
1. 矛盾檢查（優先）：
   - 正確答案：X
   - Evidence 內容：Y
   - 是否矛盾：是/否
   - 若矛盾 → 直接評 1 分

2. 術語檢查（若無矛盾）：
   - 題目術語：[術語1, 術語2, ...]
   - Evidence 中已出現：[術語1, ...]
   - Evidence 中未出現：[術語2, ...] (計數：N 個)

3. 評分判斷：
   - 無矛盾 + 0 個未出現 → 4-5 分
   - 無矛盾 + 1-2 個未出現 → 3 分
   - 無矛盾 + 3 個未出現 → 2 分
   - 無矛盾 + 4+ 個未出現 → 1 分
   - 有矛盾 → 1 分

【評分】X 分

【建議】（若評分 < 4）
1. [針對矛盾或缺失術語的具體改進建議]
```

---

## 🎯 與舊版 Rubric 的差異

| 項目 | 舊版 | 新版（Evidence-Based）|
|------|------|----------------------|
| 評估重點 | 情境完整性、術語定義 | 術語是否在教材中、答案一致性 |
| 情境要求 | 需要提供情境故事 | **放寬**（假設學生已看過教材）|
| 矛盾檢查 | 次要 | **優先檢查**（最嚴重錯誤）|
| 術語來源 | 題目內定義 | **source.evidence** |
| 1 分標準 | 大量未定義術語 | 答案矛盾 OR 大量教材未提及術語 |

---

## 📊 實測結果（基於真實生成題目）

**測試案例**：用戶提供的 5 題

| 題號 | 問題 | Evidence 狀況 | 預期評分 |
|------|------|--------------|---------|
| 1 | 如何處理缺失值？| 回歸模型在 evidence 中 | 3-4 分 |
| 3 | KNN 算法目的？ | KNN、預測缺失值都在 | 4-5 分 |
| 5 | 填補年齡用什麼？| ❌ 答案「中位數」vs Evidence「平均值」| **1 分** |

**結論**：新版 Rubric 能有效識別術語一致性問題，並優先抓出答案矛盾的嚴重錯誤。

## 🔍 檢測清單 (Checklist for LLM)

評估「可理解性」時，請檢查以下項目：

### 術語使用 (Terminology Usage)
- [ ] 是否有**未經定義的專業術語**？（計數）
- [ ] 這些術語是否**超過目標學生的先備知識**？
- [ ] 是否提供了**術語的定義或解釋**？

### 情境說明 (Context Provision)
- [ ] 是否提供了**問題的應用場景或背景**？
- [ ] 學生能否理解**為什麼要討論這個問題**？
- [ ] 是否有**具體例子或數字**幫助理解？

### 概念銜接 (Conceptual Flow)
- [ ] 問題陳述是否**循序漸進**？
- [ ] 是否有**概念跳躍**，需要學生自行填補空白？
- [ ] 邏輯鏈是否**完整**？

---

## 💡 LLM 評估建議模板

當評估「可理解性」時，LLM 應包含以下分析：

```
【分析】
1. 術語檢查：本題使用了 X 個專業術語，其中 Y 個未經定義（列出術語名稱）。
   - [術語 1]：已定義 / 未定義，學生[可能/不太可能]理解
   - [術語 2]：...

2. 情境檢查：
   - 是否提供應用場景：是 / 否
   - 情境豐富程度：[簡略/基本/充足/豐富]
   - 具體例子：有 / 無

3. 概念銜接：
   - 是否有跳躍：是（指出位置）/ 否
   - 邏輯完整性：[完整/尚可/有缺口]

4. 目標學生程度評估：
   - 預估需要的先備知識：[基礎/中等/進階]
   - 是否適合目標受眾：是 / 否

【評分】X 分

【建議】
1. [具體改進建議 1]
2. [具體改進建議 2]
```

---

## 🎯 整合到 Prompt 的建議

在 QualityCritic 的 prompt 中，可以加入以下「特別注意事項」：

```
**特別注意事項 - 可理解性評估：**

在評估「可理解性 (Understandable)」時，請特別留意：

1. **術語檢查**：
   - 計數未經定義的專業術語
   - 評估這些術語是否超過學生程度
   - 例如：對國中生使用「梯度下降」而不解釋 → 嚴重扣分

2. **情境檢查**：
   - 是否提供問題的應用場景或背景
   - 是否有具體例子幫助理解
   - 例如：直接問「Backpropagation 是什麼」vs「在訓練神經網絡時，我們需要...」

3. **給分參考**：
   - 1 分：3+ 未定義術語 + 無情境
   - 2 分：2-3 未定義術語 或 情境不足
   - 3 分：關鍵術語有定義 + 基本情境
   - 4 分：術語恰當 + 充足情境
   - 5 分：完整故事 + 循序漸進 + 實際案例
```
